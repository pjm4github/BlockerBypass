<!DOCTYPE html>
<html class="no-js" itemscope="" itemtype="http://schema.org/WebPage" lang="en"><head><meta charset="utf-8"/><meta content="width=device-width,initial-scale=1,shrink-to-fit=no" name="viewport"/><meta content="Hugo 0.108.0" name="generator"/><meta content="index, follow" name="robots"/><link href="../../../favicons/favicon.ico" rel="shortcut icon"/><link href="../../../favicons/apple-touch-icon-180x180.png" rel="apple-touch-icon" sizes="180x180"/><link href="../../../favicons/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"/><link href="../../../favicons/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"/><link href="../../../favicons/android-36x36.png" rel="icon" sizes="36x36" type="image/png"/><link href="../../../favicons/android-48x48.png" rel="icon" sizes="48x48" type="image/png"/><link href="../../../favicons/android-72x72.png" rel="icon" sizes="72x72" type="image/png"/><link href="../../../favicons/android-96x96.png" rel="icon" sizes="96x96" type="image/png"/><link href="../../../favicons/android-144x144.png" rel="icon" sizes="144x144" type="image/png"/><link href="../../../favicons/android-192x192.png" rel="icon" sizes="192x192" type="image/png"/><title>Real-Time | DPsim</title><meta content="This page describes recommended techniques to optimize the host operating system for real-time execution of DPsim.
DPsim supports real-time execution, where the simulation time equals the real or wall clock time, on any system. However, without modifying system parameters the minimum time step reliably achievable will not be in the range of microseconds. This is due to operating system noise and other processes interfering with the simulation. With proper tuning, we have achieved real-time time steps as low as 5 us synchronized to a FPGA using VILLASnode." name="description"/><meta content="Real-Time" property="og:title"/><meta content="This page describes recommended techniques to optimize the host operating system for real-time execution of DPsim.
DPsim supports real-time execution, where the simulation time equals the real or wall clock time, on any system. However, without modifying system parameters the minimum time step reliably achievable will not be in the range of microseconds. This is due to operating system noise and other processes interfering with the simulation. With proper tuning, we have achieved real-time time steps as low as 5 us synchronized to a FPGA using VILLASnode." property="og:description"/><meta content="article" property="og:type"/><meta content="https://dpsim.fein-aachen.org/docs/getting-started/real-time/" property="og:url"/><meta content="docs" property="article:section"/><meta content="2025-02-13T00:00:00+00:00" property="article:published_time"/><meta content="2025-10-09T15:27:51+02:00" property="article:modified_time"/><meta content="DPsim" property="og:site_name"/><meta content="Real-Time" itemprop="name"/><meta content="This page describes recommended techniques to optimize the host operating system for real-time execution of DPsim.
DPsim supports real-time execution, where the simulation time equals the real or wall clock time, on any system. However, without modifying system parameters the minimum time step reliably achievable will not be in the range of microseconds. This is due to operating system noise and other processes interfering with the simulation. With proper tuning, we have achieved real-time time steps as low as 5 us synchronized to a FPGA using VILLASnode." itemprop="description"/><meta content="2025-02-13T00:00:00+00:00" itemprop="datePublished"/><meta content="2025-10-09T15:27:51+02:00" itemprop="dateModified"/><meta content="625" itemprop="wordCount"/><meta content="" itemprop="keywords"/><meta content="summary" name="twitter:card"/><meta content="Real-Time" name="twitter:title"/><meta content="This page describes recommended techniques to optimize the host operating system for real-time execution of DPsim.
DPsim supports real-time execution, where the simulation time equals the real or wall clock time, on any system. However, without modifying system parameters the minimum time step reliably achievable will not be in the range of microseconds. This is due to operating system noise and other processes interfering with the simulation. With proper tuning, we have achieved real-time time steps as low as 5 us synchronized to a FPGA using VILLASnode." name="twitter:description"/><link as="style" href="../../../scss/main.min.73bc65c1e18bb0cbd02b071f40b73b018bed23b1835e915c0f4f73a772a6713b.css" rel="preload"/><link href="../../../scss/main.min.73bc65c1e18bb0cbd02b071f40b73b018bed23b1835e915c0f4f73a772a6713b.css" integrity="" rel="stylesheet"/><script crossorigin="anonymous" integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script crossorigin="anonymous" defer="" integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli" src="https://unpkg.com/lunr@2.3.9/lunr.min.js"></script></head><body class="td-page"><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class="navbar-brand" href="../../../index.html"><span class="navbar-brand__logo navbar-logo"></span><span class="navbar-brand__name">DPsim</span></a><div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar"><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href="../../index.html"><span class="active">Documentation</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><div class="td-search td-search--offline"><div class="td-search__icon"></div><input aria-label="Search this site…" autocomplete="off" class="td-search__input form-control" data-offline-search-base-href="/" data-offline-search-index-json-src="/offline-search-index.6e190e0fa554642d85037c34aa773c60.json" data-offline-search-max-results="10" placeholder="Search this site…" type="search"/></div></div></nav></header><div class="container-fluid td-outer"><div class="td-main"><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div class="td-sidebar__inner" id="td-sidebar-menu"><form class="td-sidebar__search d-flex align-items-center"><div class="td-search td-search--offline"><div class="td-search__icon"></div><input aria-label="Search this site…" autocomplete="off" class="td-search__input form-control" data-offline-search-base-href="/" data-offline-search-index-json-src="/offline-search-index.6e190e0fa554642d85037c34aa773c60.json" data-offline-search-max-results="10" placeholder="Search this site…" type="search"/></div><button aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation" class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" data-target="#td-section-nav" data-toggle="collapse" type="button"></button></form><nav class="collapse td-sidebar-nav" id="td-section-nav"><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docs-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" href="../../index.html" id="m-docs"><span>Documentation</span></a><ul class="ul-1"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsoverview-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__section" href="../../overview/index.html" id="m-docsoverview"><span>Overview</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsoverviewarchitecture-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__page" href="../../overview/architecture/index.html" id="m-docsoverviewarchitecture"><span>Architecture</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsoverviewattributes-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__page" href="../../overview/attributes/index.html" id="m-docsoverviewattributes"><span>Attributes</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsoverviewscheduling-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__page" href="../../overview/scheduling/index.html" id="m-docsoverviewscheduling"><span>Scheduling</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsoverviewinterfaces-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__page" href="../../overview/interfaces/index.html" id="m-docsoverviewinterfaces"><span>Interfaces</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsoverviewmnainterface-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__page" href="../../overview/mnainterface/index.html" id="m-docsoverviewmnainterface"><span>Interfacing with the MNA Solver</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsoverviewsubcomponents-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__page" href="../../overview/subcomponents/index.html" id="m-docsoverviewsubcomponents"><span>Subcomponent Handling</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docsgetting-started-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__section" href="../index.html" id="m-docsgetting-started"><span>Getting Started</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-docsgetting-startedreal-time-li"><a class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" href="index.html" id="m-docsgetting-startedreal-time"><span class="td-sidebar-nav-active-item">Real-Time</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsgetting-startedbuild-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__page" href="../build/index.html" id="m-docsgetting-startedbuild"><span>Build</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsgetting-startedinstall-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__page" href="../install/index.html" id="m-docsgetting-startedinstall"><span>Install</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsconcepts-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__section" href="../../concepts/index.html" id="m-docsconcepts"><span>Concepts</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconceptsdyn-phasors-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__page" href="../../concepts/dyn-phasors/index.html" id="m-docsconceptsdyn-phasors"><span>Dynamic Phasors</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconceptsnodal-analysis-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__page" href="../../concepts/nodal-analysis/index.html" id="m-docsconceptsnodal-analysis"><span>Nodal Analysis</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsconceptspowerflow-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__page" href="../../concepts/powerflow/index.html" id="m-docsconceptspowerflow"><span>Powerflow</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsdevelopment-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__section" href="../../development/index.html" id="m-docsdevelopment"><span>Development</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdevelopmentdebugging-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__page" href="../../development/debugging/index.html" id="m-docsdevelopmentdebugging"><span>Debugging</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsdevelopmentguidelines-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__page" href="../../development/guidelines/index.html" id="m-docsdevelopmentguidelines"><span>Guidelines</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsmodels-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__section" href="../../models/index.html" id="m-docsmodels"><span>Models</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsmodelstransformer-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__page" href="../../models/transformer/index.html" id="m-docsmodelstransformer"><span>Transformer</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsmodelsbranches-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__page" href="../../models/branches/index.html" id="m-docsmodelsbranches"><span>Branches</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsmodelsinduction-machine-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__page" href="../../models/induction-machine/index.html" id="m-docsmodelsinduction-machine"><span>Induction Machine</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsmodelsrlc-elements-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__page" href="../../models/rlc-elements/index.html" id="m-docsmodelsrlc-elements"><span>RLC-Elements</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsmodelssynchronous-generator-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__page" href="../../models/synchronous-generator/index.html" id="m-docsmodelssynchronous-generator"><span>Synchronous Generator</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsmodelspower-electronics-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__page" href="../../models/power-electronics/index.html" id="m-docsmodelspower-electronics"><span>VS-Inverter</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docstasks-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__section" href="../../tasks/index.html" id="m-docstasks"><span>Core Tasks</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstasksadd-model-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__page" href="../../tasks/add-model/index.html" id="m-docstasksadd-model"><span>Add New Model</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docstaskscreate-simulation-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__page" href="../../tasks/create-simulation/index.html" id="m-docstaskscreate-simulation"><span>Create New Simulation</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsexamples-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__section" href="../../examples/index.html" id="m-docsexamples"><span>Examples</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsroadmap-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__page" href="../../roadmap/index.html" id="m-docsroadmap"><span>Roadmap</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreference-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__page" href="../../reference/index.html" id="m-docsreference"><span>Reference</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docscontribution-guidelines-li"><a class="align-left pl-0 td-sidebar-link td-sidebar-link__page" href="../../contribution-guidelines/index.html" id="m-docscontribution-guidelines"><span>Contribution Guidelines</span></a></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a class="td-page-meta--view" href="https://github.com/sogno-platform/dpsim/tree/master/content/en/docs/Getting%20started/real-time.md" rel="noopener" target="_blank"><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
<a class="td-page-meta--edit" href="https://github.com/sogno-platform/dpsim/edit/master/content/en/docs/Getting%20started/real-time.md" rel="noopener" target="_blank"><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
<a class="td-page-meta--child" href="https://github.com/sogno-platform/dpsim/new/master/content/en/docs/Getting%20started/real-time.md?filename=change-me.md&amp;value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" rel="noopener" target="_blank"><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
<a class="td-page-meta--issue" href="https://github.com/sogno-platform/dpsim/issues/new?title=Real-Time" rel="noopener" target="_blank"><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a>
<a class="td-page-meta--project-issue" href="https://github.com/sogno-platform/dpsim/issues/new" rel="noopener" target="_blank"><i class="fa-solid fa-list-check fa-fw"></i> Create project issue</a>
<a href="../_print/index.html" id="print"><i class="fa-solid fa-print fa-fw"></i> Print entire section</a></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main"><nav aria-label="breadcrumb" class="td-breadcrumbs"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../index.html">Documentation</a></li><li class="breadcrumb-item"><a href="../index.html">Getting Started</a></li><li aria-current="page" class="breadcrumb-item active"><a aria-disabled="true" class="btn-link disabled" href="index.html">Real-Time</a></li></ol></nav><div class="td-content"><h1>Real-Time</h1><header class="article-meta"></header><p>This page describes recommended techniques to optimize the host operating system for real-time execution of DPsim.</p><p>DPsim supports real-time execution, where the simulation time equals the real or wall clock time, on any system.
However, without modifying system parameters the minimum time step reliably achievable will not be in the range of microseconds.
This is due to operating system noise and other processes interfering with the simulation.
With proper tuning, we have achieved real-time time steps as low as 5 us synchronized to a FPGA using VILLASnode.
Synchronizing the time step to an external source is only necessary, when very high time step accuracy, with maximum deviations in the nanoseconds, is required.</p><h1 id="operating-system-and-kernel">Operating System and Kernel</h1><p>Using a Linux kernel with the <code>PREEMPT_RT</code> feature improves latency when issuing system calls and enables the FIFO scheduler that lets us avoid preemption during the real-time simulation.</p><p>Most distributions offer a binary package for a <code>PREEMPT_RT</code> enabled kernel. For example on Rocky Linux:</p><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>sudo dnf --enablerepo<span style="color:#ce5c00;font-weight:700">=</span>rt install kernel-rt kernel-rt-devel
</span></span></code></pre></div><p>More aggressive tuning can involve isolating a set of cores for exclusive use by the real-time simulation.
This way, the kernel will not schedule any processes on these cores.
Add the kernel parameters <code>isolcpus</code> and <code>nohz_full</code> using, for example, <code>grubby</code>:</p><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>sudo grubby --update-kernel<span style="color:#ce5c00;font-weight:700">=</span>ALL --args<span style="color:#ce5c00;font-weight:700">=</span><span style="color:#4e9a06">"isolcpus=9,11,13,15 nohz_full=9,11,13,15"</span>
</span></span></code></pre></div><p>Something similar, but less invasive and non-permanent can be achieved using <code>tuna</code>:</p><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>sudo tuna isolate -c 9,11,13,15
</span></span></code></pre></div><p>To avoid real-time throttling to cause overruns disable this feature:</p><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-bash" data-lang="bash"><span style="display:flex"><span>sudo bash -c <span style="color:#4e9a06">"echo -1 &gt; /proc/sys/kernel/sched_rt_runtime_us"</span>
</span></span></code></pre></div><p>Note that this is not persistent when rebooting.</p><h1 id="simulation-model-tuning">Simulation Model Tuning</h1><p>Real time capable models cannot issue any system calls during simulation as the context switch to the kernel introduces unacceptable latencies.
This means models cannot allocate memory, use mutexes or other interrupt-driven synchronization primitives, read or write data from files.
You should turn off logging, when time steps in the low milliseconds are desired.
There is a <code>RealTimeDataLogger</code> that can be used to output simulation results in these cases.
Note however, that this logger pre-allocated the memory required for all of the logging required during simulations.
Your machine may run out of memory, when the simulation is long or you log too many signals.</p><p>You can increase the performance of your simulation by adding the <code>-flto</code> and <code>-march=native</code> compiler flags:</p><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-diff" data-lang="diff"><span style="display:flex"><span><span style="color:navy;font-weight:700">diff --git a/CMakeLists.txt b/CMakeLists.txt
</span></span></span><span style="display:flex"><span><span style="color:navy;font-weight:700">index 8801cbe8d..4a2843269 100644
</span></span></span><span style="display:flex"><span><span style="color:navy;font-weight:700"></span><span style="color:#a40000">--- a/CMakeLists.txt
</span></span></span><span style="display:flex"><span><span style="color:#a40000"></span><span style="color:#00a000">+++ b/CMakeLists.txt
</span></span></span><span style="display:flex"><span><span style="color:#00a000"></span><span style="color:purple;font-weight:700">@@ -79,7 +79,7 @@ include(CheckSymbolExists)
</span></span></span><span style="display:flex"><span><span style="color:purple;font-weight:700"></span> check_symbol_exists(timerfd_create sys/timerfd.h HAVE_TIMERFD)
</span></span><span style="display:flex"><span> check_symbol_exists(getopt_long getopt.h HAVE_GETOPT)
</span></span><span style="display:flex"><span> if(CMAKE_BUILD_TYPE STREQUAL "Release" OR CMAKE_BUILD_TYPE STREQUAL "RelWithDebInfo")
</span></span><span style="display:flex"><span><span style="color:#a40000">-       add_compile_options(-Ofast)
</span></span></span><span style="display:flex"><span><span style="color:#a40000"></span><span style="color:#00a000">+       add_compile_options(-Ofast -flto -march=native)
</span></span></span><span style="display:flex"><span><span style="color:#00a000"></span> endif()
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span> # Get version info and buildid from Git
</span></span></code></pre></div><h1 id="running-a-real-time-simulation">Running a Real-Time Simulation</h1><p>Before running a simulation, you can run the following commands as root:</p><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-bash" data-lang="bash"><span style="display:flex"><span><span style="color:#204a87">echo</span> <span style="color:#4e9a06">"evacuating cores"</span>
</span></span><span style="display:flex"><span>tuna isolate -c 9,11,13,15
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span><span style="color:#204a87">echo</span> <span style="color:#4e9a06">"disabling RT throttling"</span>
</span></span><span style="display:flex"><span><span style="color:#204a87">echo</span> -1 &gt; /proc/sys/kernel/sched_rt_runtime_us
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span><span style="color:#204a87">echo</span> <span style="color:#4e9a06">"stopping systemd services"</span>
</span></span><span style="display:flex"><span>systemctl stop polkit
</span></span><span style="display:flex"><span>systemctl stop containerd
</span></span><span style="display:flex"><span>systemctl stop crond
</span></span><span style="display:flex"><span>systemctl stop chronyd
</span></span></code></pre></div><p>As a reference, real-time simulation examples are provided in the <code>dpsim/examples/cxx</code> and <code>dpsim-villas/examples/cxx</code> folder of the DPsim repository.</p><p>To benefit from the <code>PREEMPT_RT</code> feature and the isolated cores, the simulation has to be started using the <code>chrt</code> command to set the scheduling policy and priority, and the <code>taskset</code> command to pin the process to the isolated cores.</p><ul><li><a href="http://man7.org/linux/man-pages/man1/chrt.1.html">chrt man-page</a></li><li><a href="http://man7.org/linux/man-pages/man1/taskset.1.html">taskset man-page</a></li></ul><p>In the following example, we set the FIFO scheduling policy with the highest priority (99) and pin the execution of the simulation to CPU cores 9,11,13,15 which have been reserved previously (see above).</p><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-bash" data-lang="bash"><span style="display:flex"><span><span style="color:#8f5902;font-style:italic"># the simple RT_DP_CS_R_1 simulation</span>
</span></span><span style="display:flex"><span>taskset -c 9,11,13,15 chrt -f <span style="color:#0000cf;font-weight:700">99</span> build/dpsim/examples/cxx/RT_DP_CS_R_1
</span></span><span style="display:flex"><span>
</span></span><span style="display:flex"><span><span style="color:#8f5902;font-style:italic"># Cosimulation using VILLASnode, FPGA synchronized time step, and exchanging data via Aurora interface.</span>
</span></span><span style="display:flex"><span><span style="color:#8f5902;font-style:italic"># Here we need sudo, to interact with the FPGA. We disable logging (log=false) and set the time step to 50 us (-t 0.00005).</span>
</span></span><span style="display:flex"><span>sudo taskset -c 9,11,13,15 chrt -f <span style="color:#0000cf;font-weight:700">99</span> build/dpsim-villas/examples/cxx/FpgaCosim3PhInfiniteBus -o <span style="color:#000">log</span><span style="color:#ce5c00;font-weight:700">=</span><span style="color:#204a87">false</span> -t 0.00005 -d <span style="color:#0000cf;font-weight:700">10</span>
</span></span></code></pre></div><div class="text-muted mt-5 pt-3 border-top">Last modified 09.10.2025: <a href="https://github.com/sogno-platform/dpsim/commit/452323ca7ab3dc1e75644a56f682e6fe0c3e4ac4">chore(deps): Bump pypa/gh-action-pypi-publish from 1.12.4 to 1.13.0 in /.github/workflows (#405) (452323c)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class="row"><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li aria-label="Slack" class="list-inline-item mx-2 h3" data-placement="top" data-toggle="tooltip" title="Slack"><a aria-label="Slack" class="text-white" href="https://slack.lfenergy.org/" rel="noopener" target="_blank"><i class="fab fa-slack"></i></a></li><li aria-label="GitHub Discussions" class="list-inline-item mx-2 h3" data-placement="top" data-toggle="tooltip" title="GitHub Discussions"><a aria-label="GitHub Discussions" class="text-white" href="https://github.com/sogno-platform/dpsim/discussions" rel="noopener" target="_blank"><i class="fab fa-github"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li aria-label="GitHub" class="list-inline-item mx-2 h3" data-placement="top" data-toggle="tooltip" title="GitHub"><a aria-label="GitHub" class="text-white" href="https://github.com/sogno-platform/dpsim" rel="noopener" target="_blank"><i class="fab fa-github"></i></a></li><li aria-label="RWTH GitLab" class="list-inline-item mx-2 h3" data-placement="top" data-toggle="tooltip" title="RWTH GitLab"><a aria-label="RWTH GitLab" class="text-white" href="https://git.rwth-aachen.de/acs/public/simulation/dpsim/dpsim" rel="noopener" target="_blank"><i class="fab fa-gitlab"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class="text-white">© 2025 The DPsim Authors All Rights Reserved</small></div></div></div></footer></div><link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/katex.min.css" integrity="sha512-6VMVcy7XQNyarhVuiL50FzpgCFKsyTd6YO93aaQEyET+BNaWvj0IgKR86Bf6+AmWczxAcSnL+JGjo+iStgO1gQ==" rel="stylesheet"/><script crossorigin="anonymous" defer="" integrity="sha512-b9IKj4LCNrtCPBhceRcoYOHWW/S2q9fpl7iAJlyxYpykRj1SKM7FE9+E0NEnJ8g8ni47LBr2GuX9qzg/xeuwzQ==" src="https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/katex.min.js"></script><script crossorigin="anonymous" defer="" integrity="sha512-iWiuBS5nt6r60fCz26Nd0Zqe0nbk1ZTIQbl3Kv7kYsX+yKMUFHzjaH2+AnM6vp2Xs+gNmaBAVWJjSmuPw76Efg==" onload='renderMathInElement(document.body,{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"},{display:!0,left:"\\[",right:"\\]"}]})' src="https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/contrib/auto-render.min.js"></script><script crossorigin="anonymous" integrity="sha256-Kv+YPp0Njs/57VPhS2VyFuLY0q/wWb9KVlEoMCCZXxs=" src="../../../js/main.min.2aff983e9d0d8ecff9ed53e14b657216e2d8d2aff059bf4a5651283020995f1b.js"></script>
<script src="../../../js/tabpane-persist.js"></script></body></html>